<!DOCTYPE html>
<html lang="en-US">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T50RR52Y3C"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-T50RR52Y3C');
    </script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>plAI-ball | AI-generated Baseball Podcast</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter&display=swap" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9f9f9;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
        }

        img {
            display: block;
            margin: 0 auto 1.5rem;
            max-width: 100%;
            height: auto;
        }

        h1 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        h2 {
            color: #0056b3;
            border-bottom: 1px solid #ddd;
            padding-bottom: 0.25rem;
            margin-top: 2rem;
        }

        p {
            line-height: 1.6;
        }

        a {
            color: #0056b3;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .subscribe {
            display: inline-block;
            background-color: #007bff;
            color: #fff;
            padding: 0.5rem 1rem;
            margin: 1rem 0;
            border-radius: 4px;
            font-weight: bold;
        }

        ul {
            padding-left: 1.2rem;
        }

        footer {
            font-size: 0.9rem;
            color: #888;
            margin-top: 3rem;
            text-align: center;
        }

        .subscribe-container {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            column-gap: 2rem;
            row-gap: 1rem;
            margin: 1.5rem 0;
        }

        .subscribe-container p {
            font-size: 0.85rem;
            margin: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <img src="https://www.plai-ball.com/images/plaiball-logo-600.jpg" height="222" width="600"
            alt="plAI ball Logo" />

        <p><strong>plAI ball</strong> is a baseball podcast generated by AI! I created this project to experiment with
            AI technologies.</p>

        <h2 id="subscribe">Subscribe</h2>

        <p>Subscribe by copying this link into your favorite podcast app:</p>
        <p style="font-size: 1.2rem;"><code>https://www.plai-ball.com/rss.xml</code></p>

        <h2 id="listen">Listen</h2>
        <p>Listen to the latest episode from <span id="lastUpdate"></span>.</p>
        <div id="audioContainer">
        </div>

        <h2 id="flow">How It Works</h2>
        <ul>
            <li>Download the previous day's box scores.</li>
            <li>Merge the data into a single AI prompt.</li>
            <li>Generate the transcript by sending the prompt to AI.</li>
            <li>Convert the transcript into an MP3 using a TTS API.</li>
            <li>Update and publish the RSS feed.</li>
            <li>Archive all assets to Amazon S3 to preserve a historical record of data, prompts, etc.</li>
        </ul>

        <p>This flow runs daily via GitHub Actions.</p>

        <h2 id="code">Code</h2>
        <p>Check out the source on <a href="https://github.com/monsur/plAI-ball/">GitHub</a>.</p>
        <p>I used <a href="https://cursor.com">cursor.com</a> to bootstrap things before doing manual refactoring.</p>
        <p>Logo generated with Gemini!</p>

        <h2 id="disclaimer">Disclaimer</h2>
        <p>This is a personal side project. No guarantees on availability or uptime. Not affiliated with ESPN, OpenAI,
            or Google.</p>

        <footer>
            &copy; 2025 plAI-ball. All rights reserved.
        </footer>
    </div>
    <script>
        function yyyymmddToDate(yyyymmdd) {
            const year = parseInt(yyyymmdd.slice(0, 4));
            const month = parseInt(yyyymmdd.slice(4, 6)) - 1; // Month is 0-indexed
            const day = parseInt(yyyymmdd.slice(6, 8));

            return new Date(year, month, day);
        }

        window.onload = function () {
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "/rss.xml");
            xhr.overrideMimeType("text/xml");

            xhr.onload = () => {
                if (xhr.readyState === xhr.DONE && xhr.status === 200) {
                    const item = xhr.responseXML.getElementsByTagName("item")[0];
                    const audio = item.getElementsByTagName("enclosure")[0].getAttribute("url");
                    const transcript = item.getElementsByTagName("podcast:transcript")[0].getAttribute("url");
                    const guid = yyyymmddToDate(item.getElementsByTagName("guid")[0].textContent.trim());

                    document.getElementById("lastUpdate").innerText = guid.toDateString();

                    const player = new Audio(audio);
                    player.controls = true;
                    player.autoplay = false;
                    document.getElementById("audioContainer").appendChild(player);

                    const a = document.createElement("a");
                    a.href = transcript;
                    a.innerText = "read transcript";
                    a.target = "_blank";
                    const p = document.createElement("p");
                    p.appendChild(a)
                    document.getElementById("audioContainer").appendChild(p);
                }
            };

            xhr.send();
        };
    </script>
</body>

</html>